"use strict";(self["webpackChunkblog_vue"]=self["webpackChunkblog_vue"]||[]).push([[552],{86552:function(a,t,e){e.r(t),e.d(t,{default:function(){return u}});var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"avatar-container"},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[a._v("首页")]),e("el-breadcrumb-item",[a._v("个人中心")]),e("el-breadcrumb-item",[a._v("更换头像")])],1),e("el-card",[e("p",[a._v("更换头像")]),e("el-form",{ref:"avatarRef",attrs:{model:a.avatarData,"label-width":"80px"}},[e("el-form-item",[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload,"http-request":a.avatarSuccess}},[a.avatarData.avatar?e("img",{staticClass:"avatar",attrs:{src:a.avatarData.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("el-button",{attrs:{type:"primary"},on:{click:a.uploadAvatar}},[a._v("上传"),e("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1)],1)],1)},s=[],o=e(16198),l=(e(78975),e(41539),e(78783),e(33948),e(60285),e(41637),{name:"refresh",inject:["reload"],data:function(){return{avatarData:{avatar:""}}},methods:{handleAvatarSuccess:function(a,t){this.imageUrl=URL.createObjectURL(t.raw),console.log(t)},avatarSuccess:function(a){var t=this;if(console.log(a.file),a.file){var e=new FileReader;e.readAsDataURL(a.file),e.onload=function(a){t.avatarData.avatar=a.target.result}}else this.avatarData.avatar=""},uploadAvatar:function(){var a=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.$http.post("/my/update/avatar",a.$qs.stringify(a.avatarData));case 2:e=t.sent,r=e.data,0!==r.status&&a.$message.error("更换头像失败！"),a.$message.success("更新头像成功!"),a.reload();case 7:case"end":return t.stop()}}),t)})))()},beforeAvatarUpload:function(a){var t="image/jpeg"===a.type,e=a.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),e||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&e}}}),c=l,n=e(1001),i=(0,n.Z)(c,r,s,!1,null,"f19fcb58",null),u=i.exports}}]);
//# sourceMappingURL=552-legacy.1be224d7.js.map